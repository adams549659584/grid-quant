import{f as ge,d as me,r as C,c as Ce,o as Pe,E as ye,a as Ee,b as S,e as u,g as Ae,h as se,w as q,v as Se,i as ae,F as M,j as R,u as N,k as W,l as j,m as _e,n as ke,p as y,t as E,q as De,_ as $e,s as xe,x as Be,y as ne,z as we,A as be}from"./vendor.9f89fbdc.js";const Me=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const F of c)if(F.type==="childList")for(const p of F.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&f(p)}).observe(document,{childList:!0,subtree:!0});function l(c){const F={};return c.integrity&&(F.integrity=c.integrity),c.referrerpolicy&&(F.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?F.credentials="include":c.crossorigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function f(c){if(c.ep)return;c.ep=!0;const F=l(c);fetch(c.href,F)}};Me();var Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArlJREFUWEfFl1nITVEUx3/fE1GmF7wrGUvIECFCyVhEhpJSHlBIeEHCCzIkb5QhooyliBAZ4sWc8iZjMhXFC/2/9ql11rfPPfue6+uuOnXP2Wv47bWHtW4LTZaWJsenCkAXYCTQMzyaw8fw3Ad+1DOpVIDuwCpgNDC5JMBV4C6wH/haBpMCsAJYDfQtc+bGXwH7gEO17MoAzgGz6gzs1c8Ds4t81AJQ+ro1GDwz/wZoGdtIEcBJYP5/Cp65OQUs8D5jAJuBLUbxLHAAGAdMB4YmgMn+FrASmGP09X2rtfcAQ4A7QCejNAG4ad4F+MU8GuphHhtgPHDD2L4DhgHvs28eIJb6RcCJhFnHVBYCx91ALgsWQGQPI17WAbsrAqwFdjnbN0Af4I++W4BNwHan/BuYFJalCsMY4BrQwRkvAw57AK2V1syKZrCnSmRjsyaSQe0p7a1cBl4A/VywwcDTBgEGAU+cj5dAfw+gne0vC11E3xsE6AroIrKiS04nJ5eBn+74aby9AH4BnT2AToBOgpX2WoJHwHAPcBRY7ABUgnULNiK6DVWarRwDlniAjcAOp/gBGAu8rkig834b6OXsdeR3eoCZgEqnF5XkpRU2ozbfkYJSrBJ/wQPoXZ3MqAiEvus8P0jMxIhwf6iD8nIvdFat330tyO7u58A8YABw2nh4FshVWvXbysBQwpVJ/S6SXG2JleMroe/LICa6TXQRUJCYCHZujeDqF6fY8RiAar6CSC4D0wCVYF3Tj8NG/VQQRMdWOkUyA7hUBqBxbbrWYgFMBZSVVPlboKglPePHavWE6oT3BoPrwNvQ+68vIYkBRIPLT1lXrNSrLdefkEzKbCyAlkMlvs3MU51JrzewHNgAdEyAFoCKzzbgIKCeolDKZmMNM5BcUxnxrKwp8OeUTVMPQIq/unWaDvAPFJGAIVce/UQAAAAASUVORK5CYII=";function X(a,d){return ge(a,d||{timeout:1e3*5,jsonpCallback:"cb"}).then(l=>l.json())}function Ne(a,d=1,l=10){const f=`https://searchapi.eastmoney.com/api/Info/Search?appid=el1902262&type=14&token=CCSDCZSDCXYMYZYYSYYXSMDDSMDHHDJT&and14=MultiMatch/Name,Code,PinYin/${a}/true&returnfields14=Name,Code,PinYin,MarketType,JYS,MktNum,JYS4App,MktNum4App,ID,Classify,IsExactMatch,SecurityType,SecurityTypeName&pageIndex14=${d}&pageSize14=${l}&isAssociation14=false1642753371132`;return X(f)}function oe(a){return a&&a.data&&a.data.klines&&(a.data.klineDatas=a.data.klines.map(d=>{const l=d.split(","),f=l[0];let c=f,F="";return f.includes(" ")&&([c,F]=f.split(" ")),{dateStr:c,timeStr:F,openPrice:parseFloat(l[1]),closePrice:parseFloat(l[2]),highPrice:parseFloat(l[3]),lowPrice:parseFloat(l[4])}})),a}async function Ie(a){const d=`https://push2his.eastmoney.com/api/qt/stock/kline/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&beg=0&end=20500101&ut=fa5fd1943c7b386f172d6893dbfba10b&rtntype=6&secid=${a}&klt=5&fqt=1
  `,l=await X(d);return oe(l)}async function Ye(a,d){const l=`https://push2his.eastmoney.com/api/qt/stock/kline/get?secid=${a}&ut=fa5fd1943c7b386f172d6893dbfba10b&fields1=f1,f2,f3,f4,f5,f6&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&klt=101&fqt=0&end=20500101&lmt=${d}&_=${Date.now()}`,f=await X(l);return oe(f)}function Je(a,d){const l={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12==0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),"f+":a.getMilliseconds()};for(const f in l)new RegExp("("+f+")").test(d)&&(d=d.replace(RegExp.$1,l[f].toString().padStart(RegExp.$1.length,"0")));return d}function ie(a){return Je(new Date,a)}function r(a=1,d=3){const l=Math.pow(10,d);return Math.round(a*l)/l}function z(a,d,l){const f=d-l,c=(a*2+l+d)/4,F=r(f+c),p=r(c*2-l),x=r(c*2-d),B=r(c-f);return{highSalePrice:F,highSaleRate:r((F/a-1)*100,2),firstSalePrice:p,firstSaleRate:r((p/a-1)*100,2),firstBuyPrice:x,firstBuyRate:r((a/x-1)*100,2),lowBuyPrice:B,lowBuyRate:r((a/B-1)*100,2)}}const Ve=u("header",null,[u("h1",{class:"flex-center"},[u("span",{class:"title"},"\u4EF7\u683C\u9884\u6D4B"),u("a",{class:"cursor-pointer",href:"https://github.com/adams549659584/grid-quant",target:"_blank"},[u("img",{src:Re,alt:"https://github.com/adams549659584/grid-quant"})])])],-1),He={class:"flex-center space-x-4"},Te={class:"absolute"},Oe={key:0,class:"search-hotkey"},Ue=["onClick"],Le={key:1,class:"search-hotkey"},Ge=u("li",{class:"search-hotkey-items"},"\u6682\u65E0\u76F8\u5173\u80A1\u7968/\u57FA\u91D1",-1),Ke=[Ge],Qe={key:2,class:"search-hotkey"},qe=u("li",{class:"search-hotkey-items"},"\u8F93\u5165\u80A1\u7968/\u57FA\u91D1 \u7F16\u7801/\u7B80\u62FC/\u5168\u62FC/\u4E2D\u6587",-1),We=[qe],je={key:0,class:"flex-center justify-around text-xl font-bold"},Xe={class:"row p-2"},ze={class:"flex-1 text-center truncate"},Ze={class:"row"},et=u("div",{class:"column"},"\u64CD\u4F5C",-1),tt={class:"row bg-red-400"},ut=u("div",{class:"column"},"\u6781\u9650\u83B7\u5229\u4F4D",-1),st={class:"column"},at={class:"row bg-red-300"},nt=u("div",{class:"column"},"\u7B2C\u4E00\u538B\u529B\u4F4D",-1),ot={class:"column"},it={class:"row bg-green-300"},lt=u("div",{class:"column"},"\u7B2C\u4E00\u652F\u6491\u4F4D",-1),ct={class:"column"},rt={class:"row bg-green-400"},dt=u("div",{class:"column"},"\u6781\u9650\u6284\u5E95\u4F4D",-1),Ft={class:"column"},ft={class:"row"},ht=u("div",{class:"column"},"\u632F\u5E45",-1),vt={class:"column"},pt=["onClick"],gt={class:"flex-center p-4"},mt=Be("\u770B\u5B8C\u4E86"),Ct=u("footer",null,[u("div",{class:"p-4 text-gray-400"},[u("p",{class:"flex-center space-x-2"},[u("span",null,"MIT Licensed | Copyright \xA9 2022"),u("a",{href:"https://github.com/adams549659584",target:"_blank"},"adams549659584")])])],-1),Pt=me({setup(a){const d="history_search_results",l=C(!0),f=C(!1),c=C(""),F=C(),p=C(),x=C(!1),B=Number(ie("Hmm")),Z=B>=930&&B<=1500,le=!Z,ce=Ce(()=>{if(!p.value||p.value.length===0)return 0;const n=p.value.length,s=window.screen.width;return s>=1536?5-n%5:s>=1280?4-n%4:s>=1024?3-n%3:s>=768?2-n%2:0}),b=.008,I=C(5),Y=C(1e3),J=C(400),o=C(0),i=C(1e5),ee=C(0),re=C(""),V=C(!1),_=C([]),te=n=>{n?f.value=n:setTimeout(()=>{f.value=n},300)},de=async()=>{O()},Fe=async()=>{if(c.value){x.value=!0;const n=await Ne(c.value);F.value=n.Data||[],x.value=!1}else F.value=[]},H=()=>{const n=localStorage.getItem(d);return n?JSON.parse(n):[]},fe=n=>{let s=H();const v=s.findIndex(m=>n.market===m.market&&n.code===m.code&&n.name===m.name);v>-1?s[v]=n:s=[n,...s],p.value=s,localStorage.setItem(d,JSON.stringify(s))},he=async n=>(_.value.push("selectChange : ",n),re.value=n,T(n)),T=async n=>{const s=await Ye(n,2);if(s&&s.data&&s.data.klineDatas&&s.data.klineDatas.length===2){const v=s.data.klineDatas,m=ie("yyyy-MM-dd"),t=!l.value||v[1].dateStr===m&&new Date().getHours()<15?v[0]:v[1],A=z(t.closePrice,t.highPrice,t.lowPrice),k=r((A.highSalePrice-A.lowBuyPrice)/((A.highSalePrice+A.lowBuyPrice)/2),2);r(k/I.value),fe({market:s.data.market,code:s.data.code,name:s.data.name,nowPrice:v[1],nextPrice:A})}else ne.error("\u83B7\u53D6K\u7EBF\u6570\u636E\u5F02\u5E38")},ve=n=>{let s=H();s=s.filter(v=>!(n.market===v.market&&n.code===v.code&&n.name===v.name)),p.value=s,localStorage.setItem(d,JSON.stringify(s))},pe=async n=>{const s=we.service({lock:!0}),v=await Ie(n);if(s.close(),v&&v.data&&v.data.klineDatas&&v.data.klineDatas.length>0){V.value=!0,_.value=[],o.value=0,i.value=1e5,_.value.push(`\u521D\u59CB\u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value}`);const m=v.data.klineDatas,t=m[0];let A=t.dateStr,k=t.highPrice,w=t.lowPrice,U=t.closePrice,P=z(U,k,w),L=r((P.firstSalePrice-P.firstBuyPrice)/((P.firstSalePrice+P.firstBuyPrice)/2),2),$=r(L/I.value);$<b&&($=b);let G=t.openPrice,D=G;for(let K=1;K<m.length;K++){const e=m[K];if(A===e.dateStr?(e.highPrice>k&&(k=e.highPrice),e.lowPrice<w&&(w=e.lowPrice),U=e.closePrice):(A=e.dateStr,G=e.openPrice,D=G,P=z(U,k,w),k=e.highPrice,w=e.lowPrice,L=r((P.firstSalePrice-P.firstBuyPrice)/((P.firstSalePrice+P.firstBuyPrice)/2),2),$=r(L/I.value),$<b&&($=b)),o.value<Y.value&&e.openPrice>P.firstBuyPrice&&e.openPrice<P.firstSalePrice){const h=Y.value-o.value,g=r(h*e.openPrice,2);if(D=e.openPrice,i.value<g){_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u4F59\u989D \uFFE5${i.value} \u4E0D\u8DB3\u4EE5\u5EFA\u4ED3${h}\uFF0C \u5E02\u503C\uFFE5 ${(e.openPrice*o.value+i.value).toFixed(2)}`);continue}o.value=r(o.value+h),i.value=r(i.value-g),_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A \u4F4E\u4E8E\u6700\u5C0F\u6301\u4ED3\uFF0C\uFFE5${e.openPrice} \u4E70\u5165 ${h} \u80A1 , \u652F\u51FA \uFFE5${g} \uFF0C \u6301\u4ED3 ${o.value} \uFF0C \u4F59\u989D \uFFE5${i.value} \uFF0C \u5E02\u503C \uFFE5${(e.closePrice*o.value+i.value).toFixed(2)}`)}const Q=e.openPrice/D-1;if(Math.abs(Q)>$){if(o.value>0&&e.openPrice>P.highSalePrice){const h=o.value,g=r(h*e.openPrice,2);D=e.openPrice,o.value=r(o.value-h),i.value=r(i.value+g),_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u6B62\u76C8\u5356\u51FA ${h} \u80A1 , \u6536\u5165 \uFFE5${g} \uFF0C \u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value} \uFF0C \u5E02\u503C \uFFE5${(e.openPrice*o.value+i.value).toFixed(2)}`)}else if(o.value>0&&e.openPrice<P.lowBuyPrice){const h=o.value,g=r(h*e.openPrice,2);D=e.openPrice,o.value=r(o.value-h),i.value=r(i.value+g),_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u6B62\u635F\u5356\u51FA ${h} \u80A1 , \u6536\u5165 \uFFE5${g} \uFF0C \u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value} \uFF0C \u5E02\u503C \uFFE5${(e.openPrice*o.value+i.value).toFixed(2)}`)}else if(Q>0&&o.value-J.value>=Y.value){const h=J.value,g=r(h*e.openPrice,2);D=e.openPrice,o.value=r(o.value-h),i.value=r(i.value+g),_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u7F51\u683C\u5356\u51FA ${h} \u80A1 , \u6536\u5165 \uFFE5${g} \uFF0C \u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value} \uFF0C \u5E02\u503C\uFFE5 ${(e.openPrice*o.value+i.value).toFixed(2)}`)}else if(Q<0&&e.openPrice>P.lowBuyPrice){const h=J.value,g=r(h*e.openPrice,2);if(i.value<g){_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u4F59\u989D \uFFE5${i.value} \u4E0D\u8DB3\u4EE5\u8D2D\u4E70\u672C\u6B21\u7F51\u683C\uFF0C \u5E02\u503C\uFFE5 ${(e.openPrice*o.value+i.value).toFixed(2)}`);continue}D=e.openPrice,o.value=r(o.value+h),i.value=r(i.value-g),_.value.push(`${e.dateStr} ${e.timeStr}\uFF1A\uFFE5${e.openPrice} \u7F51\u683C\u4E70\u5165 ${h} \u80A1 , \u652F\u51FA \uFFE5${g} \uFF0C \u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value} \uFF0C \u5E02\u503C\uFFE5 ${(e.openPrice*o.value+i.value).toFixed(2)}`)}}}_.value.push(`\u5F53\u524D\u6301\u4ED3 ${o.value} \uFF0C  \u4F59\u989D \uFFE5${i.value}\uFF0C  \u5E02\u503C \uFFE5${(m[m.length-1].closePrice*o.value+i.value).toFixed(2)}`)}else ne.error("\u83B7\u53D6K\u7EBF\u6570\u636E\u5F02\u5E38")},ue=async()=>{V.value=!1},O=async()=>{p.value=H(),p.value.length>0?p.value.forEach(n=>T(`${n.market}.${n.code}`)):["1.510050","0.159602","1.561990","1.510500","1.512100","1.516970","0.159928","1.512670","1.512660","1.516110","1.512000","1.512480","1.516160","1.515030","1.515790","0.159867","0.159790","1.512760","1.516100","0.159997","0.159755","1.512980","0.159828","1.512170","0.159883","1.513050","1.513330","0.159967","0.159745","1.512200","0.159825","0.159996","0.159992","1.515250","1.516780","1.516150","1.511220","1.511260","0.159905","1.511380","1.513500","0.161834","1.501022","0.159981","1.512890","1.512690","1.513100","1.513300"].forEach(n=>T(n)),Z&&(ee.value=setTimeout(()=>{O()},1e3*30))};return(()=>{O()})(),Pe(()=>{clearTimeout(ee.value)}),(n,s)=>{const v=ye,m=Ee;return y(),S("div",null,[Ve,u("main",null,[u("header",He,[le?(y(),Ae(v,{key:0,modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),"inline-prompt":"","active-text":"\u9884","inactive-text":"\u56DE",onChange:de},null,8,["modelValue"])):se("",!0),u("div",null,[q(u("input",{class:"input-search",type:"text",placeholder:"\u8BF7\u8F93\u5165\u80A1\u7968/\u57FA\u91D1\u4EE3\u7801","onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),onFocus:s[2]||(s[2]=t=>te(!0)),onBlur:s[3]||(s[3]=t=>te(!1)),onInput:Fe},null,544),[[Se,c.value]]),q(u("div",Te,[F.value&&F.value.length>0?(y(),S("ul",Oe,[(y(!0),S(M,null,R(F.value,t=>(y(),S("li",{class:"search-hotkey-items",key:`${t.MktNum}.${t.Code}_${t.Name}`,onClick:A=>he(`${t.MktNum}.${t.Code}`)},E(`${t.Code} ${t.Name} ${t.SecurityTypeName}`),9,Ue))),128))])):c.value.length>0?(y(),S("ul",Le,Ke)):(y(),S("ul",Qe,We))],512),[[ae,f.value]])])]),u("main",null,[p.value?(y(),S("div",je,[(y(!0),S(M,null,R(p.value,(t,A)=>(y(),S("div",{class:"next-price-box",key:A},[u("div",Xe,[u("span",ze,E(`${t.code} ${t.name}`),1),j(m,{class:"w-min",type:"primary",icon:N(De),circle:"",onClick:k=>pe(`${t.market}.${t.code}`)},null,8,["icon","onClick"]),j(m,{class:"w-min",type:"danger",icon:N($e),circle:"",onClick:k=>ve(t)},null,8,["icon","onClick"])]),u("div",Ze,[et,u("div",{class:xe(["column close-price-green",{"close-price-red":t.nowPrice.closePrice>=(t.nextPrice.firstSalePrice+t.nextPrice.firstBuyPrice)/2}])}," \u4EF7\u683C("+E(t.nowPrice.closePrice.toFixed(3))+") ",3)]),u("div",tt,[ut,u("div",st,E(t.nextPrice.highSalePrice.toFixed(3))+"(+"+E(t.nextPrice.highSaleRate.toFixed(2))+"%)",1)]),u("div",at,[nt,u("div",ot,E(t.nextPrice.firstSalePrice.toFixed(3))+"(+"+E(t.nextPrice.firstSaleRate.toFixed(2))+"%)",1)]),u("div",it,[lt,u("div",ct,E(t.nextPrice.firstBuyPrice.toFixed(3))+"(-"+E(t.nextPrice.firstBuyRate.toFixed(2))+"%)",1)]),u("div",rt,[dt,u("div",Ft,E(t.nextPrice.lowBuyPrice.toFixed(3))+"(-"+E(t.nextPrice.lowBuyRate.toFixed(2))+"%)",1)]),u("div",ft,[ht,u("div",vt,E((t.nextPrice.firstSaleRate+t.nextPrice.firstBuyRate).toFixed(2))+"% - "+E((t.nextPrice.highSaleRate+t.nextPrice.lowBuyRate).toFixed(2))+"% ",1)])]))),128)),(y(!0),S(M,null,R(N(ce),t=>(y(),S("div",{class:"next-price-box invisible",key:t}))),128)),q(u("div",{class:"backtesting-log-bg",onClick:W(ue,["stop"])},[u("div",{class:"backtesting-log-box",onClick:s[4]||(s[4]=W(()=>{},["stop"]))},[(y(!0),S(M,null,R(_.value,(t,A)=>(y(),S("div",{class:"backtesting-log-item",key:A},E(t),1))),128)),u("div",gt,[j(m,{type:"danger",icon:N(ke),onClick:W(ue,["stop"])},{default:_e(()=>[mt]),_:1},8,["icon","onClick"])])])],8,pt),[[ae,V.value]])])):se("",!0)])]),Ct])}}});be(Pt).mount("#app");
